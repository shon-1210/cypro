<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add content • cypro</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Add content">
<meta property="og:description" content="cypro">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cypro</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/about.html">About</a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../articles/terminology.html">Terminology</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/design-experiment.html">1. Experiment design</a>
    </li>
    <li>
      <a href="../articles/load-data.html">2. Data loading</a>
    </li>
    <li>
      <a href="../articles/process-data.html">3. Data processing</a>
    </li>
    <li class="dropdown-header">Quality checks</li>
    <li>
      <a href="../articles/outlier-detection.html">Outlier detection</a>
    </li>
    <li class="dropdown-header">Around the cypro object</li>
    <li>
      <a href="../articles/default-setting.html">Default setting</a>
    </li>
    <li>
      <a href="../articles/subsetting.html">Create data subsets</a>
    </li>
    <li>
      <a href="../articles/extract-data.html">Extract data and information</a>
    </li>
    <li>
      <a href="../articles/adding.html">Add content</a>
    </li>
    <li>
      <a href="../articles/renaming.html">Rename content</a>
    </li>
    <li>
      <a href="../articles/variable-sets.html">Variable sets</a>
    </li>
    <li class="dropdown-header">Cell Profiling</li>
    <li>
      <a href="../articles/dim-red.html">Dimensionality reduction</a>
    </li>
    <li>
      <a href="../articles/correlation.html">Correlation</a>
    </li>
    <li>
      <a href="../articles/clustering.html">Clustering</a>
    </li>
    <li class="dropdown-header">Analysis Modules</li>
    <li>
      <a href="../articles/module-migration.html">Migration</a>
    </li>
    <li class="dropdown-header">Visualization</li>
    <li>
      <a href="../articles/plotting-stats.html">Statistical tests and plots</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/theMILOlab/cypro/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="adding_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Add content</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/theMILOlab/cypro/blob/master/vignettes/adding.Rmd" class="external-link"><code>vignettes/adding.Rmd</code></a></small>
      <div class="hidden name"><code>adding.Rmd</code></div>

    </div>

    
    
<div id="prerequisites" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites" class="anchor" aria-hidden="true"></a>Prerequisites</h2>
<p>Make sure to be familiar with the following tutorials before proceeding:</p>
<ul>
<li><a href="extract-data.html">Extract Data</a></li>
</ul>
</div>
<div id="adding-grouping-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-grouping-variables" class="anchor" aria-hidden="true"></a>1. Adding grouping variables</h2>
<p>Using the functions introduced in the tutorial on how to extract data you can use cypro extern pipelines to continue your analyis. This might result in new grouping variables that you would like to add to the original cypro object and to integrate in the cypro workflow. You can use the function <code><a href="../reference/addClusterVariables.html">addClusterVariables()</a></code> or <code><a href="../reference/addClusterVariables.html">addMetaVariables()</a></code> for that matter. They <em>join</em> the data variables in accordance to the <a href="https://dplyr.tidyverse.org/reference/join.html" class="external-link">joining family of funcions</a> of the <code>dplyr</code>-package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># your individual analysis resulted in a data.frame containing a new cluster variable</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">example_df</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   cell_id              example_cluster_variable
##   &lt;chr&gt;                &lt;fct&gt;                   
## 1 CID_51_WI_B2_1_WP_1  Cluster_1               
## 2 CID_58_WI_B2_2_WP_1  Cluster_2               
## 3 CID_79_WI_B2_2_WP_1  Cluster_2               
## 4 CID_178_WI_B2_2_WP_1 Cluster_2               
## 5 CID_253_WI_B2_2_WP_1 Cluster_2               
## 6 CID_43_WI_B2_3_WP_1  Cluster_1</code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># current cluster variables in the cypro object</span>
<span class="fu"><a href="../reference/getGroupingVariableNames.html">getClusterVariableNames</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "hcl_euclidean_ward.D_k_4_(voi)" "pam_euclidean_k_4_(voi)"</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add new variables </span>
<span class="va">object</span> <span class="op">&lt;-</span> 
    <span class="fu"><a href="../reference/addClusterVariables.html">addClusterVariables</a></span><span class="op">(</span>
        object <span class="op">=</span> <span class="va">object</span>,
        input_df <span class="op">=</span> <span class="va">example_df</span>,
        variable_names <span class="op">=</span> <span class="st">"example_cluster_variable"</span>,
        by <span class="op">=</span> <span class="st">"cell_id"</span>
        <span class="op">)</span>

<span class="co"># new cluster variables </span>
<span class="fu"><a href="../reference/getGroupingVariableNames.html">getClusterVariableNames</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "hcl_euclidean_ward.D_k_4_(voi)" "pam_euclidean_k_4_(voi)"       
## [3] "example_cluster_variable"</code></pre>
<p>The same works for variables that are not actual clustering results but are still grouping variables. These are stored in the meta data slot. An example data.frame whose content you might want to integrate in your cypro workflow might look like this.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># data.frame that groups conditions into mechanism of action </span>
<span class="va">moa_df</span></code></pre></div>
<pre><code>## # A tibble: 39 x 2
##    condition      moa                     
##    &lt;chr&gt;          &lt;fct&gt;                   
##  1 PP-2           Epithelial              
##  2 emetine        Protein synthesis       
##  3 AZ258          Aurora kinase inhibitors
##  4 cytochalasin B Actin disruptors        
##  5 ALLN           Protein degradation     
##  6 mitoxantrone   DNA replication         
##  7 AZ-C           Eg5 inhibitors          
##  8 MG-132         Protein degradation     
##  9 AZ841          Aurora kinase inhibitors
## 10 docetaxel      Microtubule stabilizers 
## # ... with 29 more rows</code></pre>
<p>This data.frame needs the variable <em>condition</em> as key which is why we have to add them to the meta data of the <code>cypro</code>-object.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getGroupingDf.html">getMetaDf</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 1,250 x 3
##    cell_id              cell_line condition
##    &lt;chr&gt;                &lt;fct&gt;     &lt;fct&gt;    
##  1 CID_51_WI_B2_1_WP_1  MCF7      DMSO     
##  2 CID_58_WI_B2_2_WP_1  MCF7      DMSO     
##  3 CID_79_WI_B2_2_WP_1  MCF7      DMSO     
##  4 CID_178_WI_B2_2_WP_1 MCF7      DMSO     
##  5 CID_253_WI_B2_2_WP_1 MCF7      DMSO     
##  6 CID_43_WI_B2_3_WP_1  MCF7      DMSO     
##  7 CID_108_WI_B2_3_WP_1 MCF7      DMSO     
##  8 CID_228_WI_B2_3_WP_1 MCF7      DMSO     
##  9 CID_194_WI_B2_4_WP_1 MCF7      DMSO     
## 10 CID_207_WI_B2_4_WP_1 MCF7      DMSO     
## # ... with 1,240 more rows</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">object</span> <span class="op">&lt;-</span> 
    <span class="fu"><a href="../reference/addClusterVariables.html">addMetaVariables</a></span><span class="op">(</span>
        object <span class="op">=</span> <span class="va">object</span>,
        input_df <span class="op">=</span> <span class="va">moa_df</span>,
        variable_names <span class="op">=</span> <span class="st">"moa"</span>,
        by <span class="op">=</span> <span class="st">"condition"</span>
        <span class="op">)</span>

<span class="fu"><a href="../reference/getGroupingVariableNames.html">getMetaVariableNames</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "cell_line" "condition" "moa"</code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getGroupingDf.html">getMetaDf</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu">group_by</span><span class="op">(</span><span class="va">moa</span>, <span class="va">condition</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">slice_sample</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
## # Groups:   moa, condition [5]
##   cell_id             cell_line condition     moa                    
##   &lt;chr&gt;               &lt;fct&gt;     &lt;fct&gt;         &lt;fct&gt;                  
## 1 CID_79_WI_B3_4_WP_3 MCF7      latrunculin B Actin disruptors       
## 2 CID_35_WI_C2_2_WP_3 MCF7      DMSO          DMSO                   
## 3 CID_68_WI_F3_3_WP_6 MCF7      chlorambucil  DNA damage             
## 4 CID_82_WI_F3_4_WP_7 MCF7      etoposide     DNA damage             
## 5 CID_19_WI_E2_4_WP_2 MCF7      taxol         Microtubule stabilizers</code></pre>
<p>All variables added this way are accessible from all cypro functions.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/getGroupingVariableNames.html">getGroupingVariableNames</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "cell_line"                      "condition"                     
##  [3] "moa"                            "hcl_euclidean_ward.D_k_4_(voi)"
##  [5] "pam_euclidean_k_4_(voi)"        "example_cluster_variable"      
##  [7] "well_plate_name"                "well_plate_index"              
##  [9] "well"                           "well_roi"</code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plotBoxplot.html">plotBoxplot</a></span><span class="op">(</span><span class="va">object</span>, variables <span class="op">=</span> <span class="st">"AreaShape_Area"</span>, across <span class="op">=</span> <span class="st">"moa"</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="adding_files/figure-html/boxplot-example-1.png" alt="Figure 1 Variable 'moa' (mechanism of action) is now accessible from all cypro functions." width="700"><p class="caption">
Figure 1 Variable ‘moa’ (mechanism of action) is now accessible from all cypro functions.
</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jan Kueckelhaus, Dieter-Henrik Heiland.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
